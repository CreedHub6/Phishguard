{% extends 'base.html' %}

{% block content %}

<style>

/* ================= MAIN CONTAINER ================= */
.scanner-container {
    max-width: 950px;
    margin: 60px auto;
    padding: 45px;
    background: rgba(255,255,255,0.05);
    backdrop-filter: blur(20px);
    border-radius: 25px;
    border: 1px solid rgba(255,255,255,0.1);
    box-shadow: 0 25px 60px rgba(0,0,0,0.45);
    color: #fff;
}

/* ================= HEADER ================= */
.scanner-container h1 {
    font-size: 34px;
    margin-bottom: 10px;
    background: linear-gradient(90deg, #00f5a0, #00d9f5);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.scanner-container p {
    color: #ccc;
    margin-bottom: 35px;
}

/* ================= FORM ================= */
.input-group {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
}

input[type="password"] {
    flex: 1;
    padding: 15px 20px;
    border-radius: 50px;
    border: none;
    outline: none;
    font-size: 15px;
    background: rgba(255,255,255,0.08);
    color: #fff;
}

.btn-primary {
    background: linear-gradient(90deg, #00f5a0, #00d9f5);
    border: none;
    padding: 14px 35px;
    border-radius: 50px;
    font-weight: 600;
    cursor: pointer;
    transition: 0.3s ease;
}

.btn-primary:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.4);
}

/* ================= RESULT ================= */
.result-container {
    margin-top: 50px;
}

.result-card {
    padding: 35px;
    border-radius: 20px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
}

/* ================= STRENGTH METER ================= */
.strength-meter-container {
    margin-bottom: 25px;
}

.strength-label {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
    font-weight: 600;
}

.strength-bar {
    width: 100%;
    height: 14px;
    background: rgba(255,255,255,0.1);
    border-radius: 20px;
    overflow: hidden;
}

.strength-fill {
    height: 100%;
    width: {{ result.score|default:0|floatformat:0 }}%;
    transition: width 0.6s ease-in-out;
    border-radius: 20px;
}

/* Dynamic Strength Colors */
.strength-very-weak { background: #ff4d6d; }
.strength-weak { background: #ff7b00; }
.strength-medium { background: #ffc300; }
.strength-strong { background: #00d9f5; }
.strength-very-strong { background: #00f5a0; }

/* ================= INFO GRID ================= */
.info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 20px;
    margin-top: 25px;
}

.info-item {
    background: rgba(255,255,255,0.05);
    padding: 20px;
    border-radius: 15px;
    border: 1px solid rgba(255,255,255,0.08);
    transition: 0.3s ease;
}

.info-item:hover {
    transform: translateY(-5px);
    border-color: #00f5a0;
}

/* ================= RECOMMENDATIONS ================= */
.result-details ul {
    margin-top: 15px;
}

.result-details li {
    margin-bottom: 10px;
}

/* ================= TIPS ================= */
.password-tips {
    margin-top: 45px;
    padding: 25px;
    background: rgba(255,255,255,0.05);
    border-radius: 15px;
    border: 1px solid rgba(255,255,255,0.1);
}

.password-tips h3 {
    margin-bottom: 15px;
}

/* ================= RESPONSIVE ================= */
@media(max-width: 768px){
    .input-group {
        flex-direction: column;
    }
    .btn-primary {
        width: 100%;
    }
}

</style>


<div class="scanner-container">

    <h1><i class="fas fa-key"></i> Password Strength Analyzer</h1>
    <p>Evaluate entropy, resistance to brute-force attacks, and overall credential resilience.</p>

    <form method="post" class="scanner-form">
        {% csrf_token %}
        <div class="input-group">
            <input type="password" name="password" placeholder="Enter your password securely" required>
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-search"></i> Analyze
            </button>
        </div>
    </form>

    {% if result %}
    <div class="result-container">
        <h2>Password Security Report</h2>

        <div class="result-card">

            <!-- Strength Meter -->
            <div class="strength-meter-container">
                <div class="strength-label">
                    <span>Strength Level</span>
                    <span>{{ result.strength }}</span>
                </div>

                <div class="strength-bar">
                    <div class="strength-fill 
                        {% if result.strength == 'Very Weak' %}strength-very-weak
                        {% elif result.strength == 'Weak' %}strength-weak
                        {% elif result.strength == 'Medium' %}strength-medium
                        {% elif result.strength == 'Strong' %}strength-strong
                        {% else %}strength-very-strong{% endif %}">
                    </div>
                </div>
            </div>

            <!-- Info -->
            <div class="info-grid">
                <div class="info-item">
                    <strong>Password Length</strong><br>
                    {{ result.length }} characters
                </div>

                <div class="info-item">
                    <strong>Estimated Crack Time</strong><br>
                    {{ result.time_to_crack }}
                </div>

                <div class="info-item">
                    <strong>Security Score</strong><br>
                    {{ result.score }} / 100
                </div>
            </div>

            {% if result.feedback %}
            <div class="result-details">
                <h4>Security Recommendations</h4>
                <ul>
                    {% for feedback in result.feedback %}
                    <li><i class="fas fa-info-circle"></i> {{ feedback }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}

        </div>

        <div class="password-tips">
            <h3>Best Practices for Strong Passwords</h3>
            <ul>
                <li>Use at least 12â€“16 characters.</li>
                <li>Mix uppercase, lowercase, numbers, and symbols.</li>
                <li>Avoid dictionary words and predictable patterns.</li>
                <li>Use a unique password per account.</li>
                <li>Enable Multi-Factor Authentication (MFA).</li>
            </ul>
        </div>

    </div>
    {% endif %}

</div>

{% endblock %}
